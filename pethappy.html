<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetHappy - Cuidado e Amor para seu Pet</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Fredoka', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            light: '#FFD6E0', // Rosa claro
                            DEFAULT: '#FF6B6B', // Vermelho coral
                            dark: '#D9455F',
                            blue: '#4ECDC4', // Turquesa
                            yellow: '#FFE66D', // Amarelo
                        }
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #FFF9FA;
            background-image: radial-gradient(#FFD6E0 15%, transparent 16%), radial-gradient(#FFD6E0 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #FF6B6B;
            border-radius: 5px;
        }

        /* Character Animations */
        .cat-ear { animation: twitch 3s infinite; transform-origin: bottom center; }
        .dog-tail { animation: wag 1s infinite alternate; transform-origin: bottom center; }
        .eye-blink { animation: blink 4s infinite; transform-origin: center; }

        @keyframes twitch {
            0%, 90%, 100% { transform: rotate(0deg); }
            95% { transform: rotate(10deg); }
        }
        @keyframes wag {
            from { transform: rotate(-10deg); }
            to { transform: rotate(10deg); }
        }
        @keyframes blink {
            0%, 48%, 52%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.1); }
        }

        .modal {
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease-in-out;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="text-gray-700 overflow-x-hidden">

    <!-- Navega√ß√£o -->
    <nav class="bg-white/90 backdrop-blur-md shadow-lg fixed w-full z-50 top-0">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-paw text-3xl text-brand"></i>
                <span class="text-2xl font-bold text-gray-800">Pet<span class="text-brand">Happy</span></span>
            </div>
            <div class="hidden md:flex gap-6 font-medium">
                <a href="#home" class="hover:text-brand transition">In√≠cio</a>
                <a href="#servicos" class="hover:text-brand transition">Servi√ßos</a>
                <a href="#agendamento" class="hover:text-brand transition">Agendar</a>
                <a href="#contato" class="hover:text-brand transition">Contato</a>
            </div>
            <button onclick="scrollToSection('agendamento')" class="bg-brand hover:bg-brand-dark text-white px-6 py-2 rounded-full font-bold shadow-md transition transform hover:scale-105">
                Agendar Agora
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="home" class="pt-32 pb-20 px-6 relative overflow-hidden">
        <div class="container mx-auto flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 z-10 mb-10 md:mb-0">
                <h1 class="text-5xl md:text-6xl font-bold leading-tight mb-6 text-gray-800">
                    Amor e Cuidado <br> para o seu <span class="text-brand">Melhor Amigo</span>
                </h1>
                <p class="text-xl text-gray-600 mb-8 max-w-lg">
                    Banho, tosa, veterin√°rio e muito carinho. Agende o hor√°rio do seu pet em poucos cliques! Aceitamos PIX, Cart√£o e Cripto.
                </p>
                <div class="flex gap-4">
                    <button onclick="scrollToSection('agendamento')" class="bg-brand text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg hover:bg-brand-dark transition transform hover:-translate-y-1">
                        <i class="fa-solid fa-calendar-check mr-2"></i> Marcar Hor√°rio
                    </button>
                    <button onclick="scrollToSection('servicos')" class="bg-white text-brand border-2 border-brand px-8 py-4 rounded-full font-bold text-lg shadow-sm hover:bg-brand-light transition">
                        Ver Servi√ßos
                    </button>
                </div>
            </div>
            
            <!-- Animated Hero Image (SVG Composition) -->
            <div class="md:w-1/2 relative h-[400px] flex justify-center items-center">
                <!-- Decorative Circles -->
                <div class="absolute bg-brand-blue rounded-full w-64 h-64 opacity-20 animate-float top-0 right-10"></div>
                <div class="absolute bg-brand-yellow rounded-full w-40 h-40 opacity-30 animate-float bottom-10 left-10" style="animation-delay: 1s;"></div>
                
                <!-- SVG Dog -->
                <svg class="w-80 h-80 drop-shadow-2xl z-20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Dog Head -->
                    <circle cx="100" cy="100" r="60" fill="#E6C229" />
                    <!-- Ears -->
                    <path d="M50 70 L30 20 L80 50 Z" fill="#D4B018" class="cat-ear" />
                    <path d="M150 70 L170 20 L120 50 Z" fill="#D4B018" class="cat-ear" style="animation-delay: 0.5s"/>
                    <!-- Eyes -->
                    <circle cx="80" cy="90" r="8" fill="#333" class="eye-blink" />
                    <circle cx="120" cy="90" r="8" fill="#333" class="eye-blink" />
                    <!-- Nose -->
                    <ellipse cx="100" cy="110" rx="10" ry="7" fill="#333" />
                    <!-- Mouth -->
                    <path d="M90 125 Q100 135 110 125" stroke="#333" stroke-width="3" fill="none" />
                    <!-- Tongue -->
                    <path d="M95 128 Q100 145 105 128" fill="#FF6B6B" class="dog-tail" />
                    <!-- Cheeks -->
                    <circle cx="70" cy="105" r="7" fill="#FFD6E0" opacity="0.6" />
                    <circle cx="130" cy="105" r="7" fill="#FFD6E0" opacity="0.6" />
                </svg>
            </div>
        </div>
    </header>

    <!-- Servi√ßos Section -->
    <section id="servicos" class="py-20 bg-white shadow-inner relative">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="text-brand font-bold uppercase tracking-wider">O que fazemos</span>
                <h2 class="text-4xl font-bold text-gray-800 mt-2">Nossos Servi√ßos</h2>
            </div>
            
            <div id="services-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Services will be injected by JS -->
            </div>
        </div>
        
        <!-- SVG Cat Peeking -->
        <div class="absolute bottom-0 right-10 w-32 h-32 transform translate-y-1/2 z-20 hidden md:block">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 100 L20 60 Q20 30 50 30 Q80 30 80 60 L80 100 Z" fill="#333" />
                <path d="M25 60 L15 30 L40 50 Z" fill="#333" />
                <path d="M75 60 L85 30 L60 50 Z" fill="#333" />
                <circle cx="40" cy="60" r="3" fill="#FFF" class="eye-blink" />
                <circle cx="60" cy="60" r="3" fill="#FFF" class="eye-blink" />
            </svg>
        </div>
    </section>

    <!-- Agendamento Section -->
    <section id="agendamento" class="py-20 bg-brand-light/30">
        <div class="container mx-auto px-6">
            <div class="bg-white rounded-3xl shadow-2xl overflow-hidden max-w-4xl mx-auto flex flex-col md:flex-row">
                <!-- Left Side: Summary & Animation -->
                <div class="md:w-1/3 bg-brand p-8 text-white flex flex-col justify-between relative overflow-hidden">
                    <div>
                        <h3 class="text-2xl font-bold mb-4">Seu Agendamento</h3>
                        <p class="opacity-90">Preencha os dados ao lado para garantir o cuidado do seu pet.</p>
                    </div>
                    
                    <div id="booking-summary" class="mt-8 space-y-4 hidden">
                        <div class="bg-white/20 p-4 rounded-lg backdrop-blur-sm">
                            <p class="text-xs uppercase opacity-75">Servi√ßo</p>
                            <p class="font-bold text-lg" id="summary-service">-</p>
                        </div>
                        <div class="bg-white/20 p-4 rounded-lg backdrop-blur-sm">
                            <p class="text-xs uppercase opacity-75">Valor</p>
                            <p class="font-bold text-lg" id="summary-price">-</p>
                        </div>
                    </div>

                    <div class="absolute -bottom-10 -left-10 opacity-20 text-9xl">
                        <i class="fa-solid fa-bone animate-wiggle"></i>
                    </div>
                </div>

                <!-- Right Side: Form -->
                <div class="md:w-2/3 p-8 md:p-12">
                    <form id="booking-form" onsubmit="handleBooking(event)">
                        
                        <!-- Step 1: Servi√ßo -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-bold mb-2">1. Escolha o Servi√ßo</label>
                            <select id="service-select" onchange="updateSummary()" class="w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-brand focus:border-brand p-3 transition" required>
                                <option value="" disabled selected>Selecione...</option>
                                <!-- Options injected by JS -->
                            </select>
                        </div>

                        <!-- Step 2: Profissional -->
                        <div class="mb-6">
                            <label class="block text-gray-700 font-bold mb-2">2. Prefer√™ncia de Profissional</label>
                            <div id="staff-options" class="grid grid-cols-2 gap-3">
                                <!-- Staff injected by JS -->
                            </div>
                        </div>

                        <!-- Step 3: Data e Hora -->
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Data</label>
                                <input type="date" required class="w-full bg-gray-50 border border-gray-300 rounded-lg p-3 focus:border-brand outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Hora</label>
                                <input type="time" required class="w-full bg-gray-50 border border-gray-300 rounded-lg p-3 focus:border-brand outline-none">
                            </div>
                        </div>

                        <!-- Step 4: Pagamento -->
                        <div class="mb-8">
                            <label class="block text-gray-700 font-bold mb-2">3. Forma de Pagamento</label>
                            <div id="payment-options" class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                <!-- Payments injected by JS -->
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-brand text-white font-bold py-4 rounded-xl shadow-lg hover:bg-brand-dark transition transform active:scale-95 text-lg flex items-center justify-center gap-2">
                            <span>Confirmar Agendamento</span>
                            <i class="fa-solid fa-check"></i>
                        </button>

                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contato" class="bg-gray-800 text-white pt-16 pb-8">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fa-solid fa-paw text-2xl text-brand"></i>
                        <span class="text-xl font-bold">PetHappy</span>
                    </div>
                    <p class="text-gray-400">O melhor cuidado para o seu pet, com profissionais qualificados e muito amor envolvido.</p>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">Contatos</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><i class="fa-solid fa-location-dot w-6 text-brand"></i> Rua dos Pets, 123 - Centro</li>
                        <li><i class="fa-brands fa-whatsapp w-6 text-brand"></i> (11) 99999-9999</li>
                        <li><i class="fa-solid fa-envelope w-6 text-brand"></i> contato@pethappy.com.br</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">Siga-nos</h4>
                    <div class="flex gap-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-brand transition"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-blue-600 transition"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-green-500 transition"><i class="fa-brands fa-whatsapp"></i></a>
                    </div>
                    <div class="mt-8">
                        <button onclick="openAdminModal()" class="text-xs text-gray-500 hover:text-white underline">
                            <i class="fa-solid fa-lock mr-1"></i> Acesso Administrativo
                        </button>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-center text-gray-500 text-sm">
                &copy; 2024 PetHappy. Todos os direitos reservados. Desenvolvido com <i class="fa-solid fa-heart text-brand"></i>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/5511999999999" target="_blank" class="fixed bottom-6 right-6 z-50 group">
        <div class="absolute -top-10 right-0 bg-white text-gray-800 px-3 py-1 rounded-lg shadow-md text-sm font-bold opacity-0 group-hover:opacity-100 transition whitespace-nowrap">
            Fale Conosco!
        </div>
        <div class="bg-green-500 w-16 h-16 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 transition transform hover:scale-110 animate-pulse-fast">
            <i class="fa-brands fa-whatsapp text-white text-3xl"></i>
        </div>
    </a>

    <!-- ADMIN MODAL -->
    <div id="admin-modal" class="fixed inset-0 z-[100] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeAdminModal()"></div>
        
        <!-- Content -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl modal-content p-0">
            
            <!-- Login State -->
            <div id="admin-login" class="p-10 text-center">
                <div class="mb-6 bg-brand-light w-20 h-20 rounded-full flex items-center justify-center mx-auto">
                    <i class="fa-solid fa-user-shield text-brand text-4xl"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">Painel Administrativo</h2>
                <p class="text-gray-500 mb-6">Acesso restrito para gerentes</p>
                <div class="max-w-xs mx-auto space-y-4">
                    <input type="text" id="admin-user" placeholder="Usu√°rio (admin)" class="w-full p-3 border rounded-lg">
                    <input type="password" id="admin-pass" placeholder="Senha (1234)" class="w-full p-3 border rounded-lg">
                    <div class="text-xs text-gray-400 text-center">Login: <b>admin</b> | Senha: <b>1234</b></div>
                    <button onclick="checkLogin()" class="w-full bg-brand text-white py-3 rounded-lg font-bold hover:bg-brand-dark">Entrar</button>
                </div>
                <p id="login-error" class="text-red-500 text-sm mt-4 hidden">Credenciais inv√°lidas!</p>
            </div>

            <!-- Dashboard State -->
            <div id="admin-dashboard" class="hidden">
                <div class="bg-gray-800 text-white p-4 flex justify-between items-center sticky top-0 z-10">
                    <h2 class="font-bold text-lg"><i class="fa-solid fa-sliders mr-2"></i> Configura√ß√µes da Loja</h2>
                    <button onclick="logout()" class="text-sm bg-red-500 px-3 py-1 rounded hover:bg-red-600">Sair</button>
                </div>
                
                <div class="p-6">
                    <!-- Tabs -->
                    <div class="flex border-b mb-6">
                        <button class="px-4 py-2 text-brand border-b-2 border-brand font-bold" onclick="switchTab('services')">Servi√ßos</button>
                        <button class="px-4 py-2 text-gray-500 hover:text-brand" onclick="switchTab('staff')">Funcion√°rios</button>
                        <button class="px-4 py-2 text-gray-500 hover:text-brand" onclick="switchTab('payment')">Pagamentos</button>
                    </div>

                    <!-- Services Tab -->
                    <div id="tab-services" class="tab-content">
                        <h3 class="font-bold text-lg mb-4">Gerenciar Servi√ßos & Pre√ßos</h3>
                        <div id="admin-services-list" class="space-y-3">
                            <!-- Injected via JS -->
                        </div>
                        <div class="mt-4 pt-4 border-t">
                            <h4 class="font-bold text-sm mb-2">Adicionar Novo</h4>
                            <div class="flex gap-2">
                                <input id="new-service-name" type="text" placeholder="Nome" class="border p-2 rounded flex-1">
                                <input id="new-service-price" type="number" placeholder="Pre√ßo" class="border p-2 rounded w-24">
                                <input id="new-service-icon" type="text" placeholder="Icon (fa-solid fa-dog)" class="border p-2 rounded flex-1">
                                <button onclick="addService()" class="bg-green-500 text-white px-4 rounded hover:bg-green-600"><i class="fa-solid fa-plus"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Staff Tab -->
                    <div id="tab-staff" class="tab-content hidden">
                        <h3 class="font-bold text-lg mb-4">Equipe</h3>
                        <div id="admin-staff-list" class="space-y-3">
                            <!-- Injected via JS -->
                        </div>
                        <div class="mt-4 pt-4 border-t">
                            <h4 class="font-bold text-sm mb-2">Adicionar Funcion√°rio</h4>
                            <div class="flex gap-2">
                                <input id="new-staff-name" type="text" placeholder="Nome" class="border p-2 rounded flex-1">
                                <input id="new-staff-role" type="text" placeholder="Fun√ß√£o" class="border p-2 rounded flex-1">
                                <button onclick="addStaff()" class="bg-green-500 text-white px-4 rounded hover:bg-green-600"><i class="fa-solid fa-plus"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Tab -->
                    <div id="tab-payment" class="tab-content hidden">
                        <h3 class="font-bold text-lg mb-4">M√©todos de Pagamento Aceitos</h3>
                        <div id="admin-payment-list" class="grid grid-cols-2 gap-4">
                            <!-- Injected via JS -->
                        </div>
                    </div>

                </div>
                <div class="p-4 bg-gray-100 text-right">
                    <button onclick="closeAdminModal()" class="text-gray-500 mr-4">Fechar</button>
                    <button onclick="saveChanges()" class="bg-brand text-white px-6 py-2 rounded-lg font-bold shadow-lg hover:bg-brand-dark">Salvar Altera√ß√µes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-xl z-[200] transition-all duration-300 translate-y-20 opacity-0 flex items-center gap-3">
        <i class="fa-solid fa-circle-check text-green-400"></i>
        <span id="toast-msg">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <!-- JavaScript Application Logic -->
    <script>
        // --- DATA STORE (Simulated Backend) ---
        const defaultData = {
            services: [
                { id: 1, name: 'Banho & Tosa', price: 80, icon: 'fa-soap', desc: 'Banho relaxante e corte higi√™nico.' },
                { id: 2, name: 'Consulta Veterin√°ria', price: 150, icon: 'fa-user-doctor', desc: 'Check-up completo para seu amigo.' },
                { id: 3, name: 'Adestramento', price: 120, icon: 'fa-graduation-cap', desc: 'Aulas de obedi√™ncia e truques.' },
                { id: 4, name: 'Terapia Animal', price: 200, icon: 'fa-heart-pulse', desc: 'Fisioterapia e acupuntura pet.' },
                { id: 5, name: 'Vacina√ß√£o', price: 90, icon: 'fa-syringe', desc: 'Vacinas importadas e nacionais.' }
            ],
            staff: [
                { id: 1, name: 'Dr. Ricardo', role: 'Veterin√°rio' },
                { id: 2, name: 'Ana Silva', role: 'Groomer' },
                { id: 3, name: 'Carlos Santos', role: 'Adestrador' },
                { id: 4, name: 'Dra. Julia', role: 'Fisioterapeuta' }
            ],
            payments: [
                { id: 'pix', name: 'PIX', active: true, icon: 'fa-qrcode' },
                { id: 'credit', name: 'Cart√£o Cr√©dito', active: true, icon: 'fa-credit-card' },
                { id: 'debit', name: 'Cart√£o D√©bito', active: true, icon: 'fa-credit-card' },
                { id: 'cash', name: 'Dinheiro', active: true, icon: 'fa-money-bill-wave' },
                { id: 'usdt', name: 'USDT (Tether)', active: false, icon: 'fa-coins' },
                { id: 'btc', name: 'Bitcoin / Crypto', active: false, icon: 'fa-bitcoin' }
            ]
        };

        // Initialize Data (Load from LocalStorage or use Default)
        let appData = JSON.parse(localStorage.getItem('petShopData')) || defaultData;

        // --- RENDER FUNCTIONS ---

        function renderApp() {
            renderServicesGrid();
            renderBookingOptions();
            renderAdminLists(); // FIXED: Changed from renderAdminPanel() to renderAdminLists()
        }

        // 1. Render Services Grid on Homepage
        function renderServicesGrid() {
            const container = document.getElementById('services-grid');
            container.innerHTML = appData.services.map(s => `
                <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-2 border border-gray-100 group">
                    <div class="w-16 h-16 bg-brand-light text-brand rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-brand group-hover:text-white transition">
                        <i class="fa-solid ${s.icon}"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2 text-gray-800">${s.name}</h3>
                    <p class="text-gray-500 mb-4 h-12">${s.desc || 'Servi√ßo de qualidade para seu pet.'}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-2xl font-bold text-brand">R$ ${s.price}</span>
                        <button onclick="selectServiceForBooking(${s.id})" class="text-sm font-bold text-gray-400 hover:text-brand underline cursor-pointer">Agendar</button>
                    </div>
                </div>
            `).join('');
        }

        // 2. Render Booking Form Options
        function renderBookingOptions() {
            // Services Select
            const serviceSelect = document.getElementById('service-select');
            serviceSelect.innerHTML = '<option value="" disabled selected>Selecione...</option>' + 
                appData.services.map(s => `<option value="${s.id}" data-price="${s.price}">${s.name} - R$ ${s.price}</option>`).join('');

            // Staff Radio Buttons
            const staffContainer = document.getElementById('staff-options');
            staffContainer.innerHTML = appData.staff.map(s => `
                <label class="cursor-pointer">
                    <input type="radio" name="staff" value="${s.name}" class="peer sr-only" required>
                    <div class="p-3 border rounded-lg peer-checked:bg-brand peer-checked:text-white peer-checked:border-brand hover:bg-gray-50 transition text-center">
                        <div class="font-bold text-sm">${s.name}</div>
                        <div class="text-xs opacity-75">${s.role}</div>
                    </div>
                </label>
            `).join('');

            // Payment Methods
            const paymentContainer = document.getElementById('payment-options');
            const activePayments = appData.payments.filter(p => p.active);
            paymentContainer.innerHTML = activePayments.length > 0 ? activePayments.map(p => `
                <label class="cursor-pointer">
                    <input type="radio" name="payment" value="${p.id}" class="peer sr-only" required>
                    <div class="p-3 border rounded-lg peer-checked:border-brand peer-checked:bg-brand-light/20 flex items-center gap-2 hover:bg-gray-50 transition">
                        <i class="fa-solid ${p.icon} text-brand"></i>
                        <span class="text-sm font-medium">${p.name}</span>
                    </div>
                </label>
            `).join('') : '<p class="text-red-500 text-sm col-span-3">Nenhum m√©todo dispon√≠vel.</p>';
        }

        // --- INTERACTION LOGIC ---

        function updateSummary() {
            const select = document.getElementById('service-select');
            const summaryDiv = document.getElementById('booking-summary');
            
            if (select.value) {
                const option = select.options[select.selectedIndex];
                const price = option.getAttribute('data-price');
                const text = option.text.split(' - ')[0];

                document.getElementById('summary-service').innerText = text;
                document.getElementById('summary-price').innerText = `R$ ${price}`;
                summaryDiv.classList.remove('hidden');
            }
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function selectServiceForBooking(id) {
            const select = document.getElementById('service-select');
            select.value = id;
            updateSummary();
            scrollToSection('agendamento');
        }

        function handleBooking(e) {
            e.preventDefault();
            
            // Coletar dados do formul√°rio
            const serviceSelect = document.getElementById('service-select');
            const serviceName = serviceSelect.options[serviceSelect.selectedIndex].text.split(' - ')[0];
            const servicePrice = serviceSelect.options[serviceSelect.selectedIndex].getAttribute('data-price');
            
            // Tentar pegar o valor do radio button checado com seguran√ßa
            const staffInput = document.querySelector('input[name="staff"]:checked');
            const staff = staffInput ? staffInput.value : 'Sem prefer√™ncia';

            const date = e.target.querySelector('input[type="date"]').value;
            const time = e.target.querySelector('input[type="time"]').value;
            
            // Pegar o nome do pagamento (navegando pelo DOM do label customizado)
            const paymentInput = document.querySelector('input[name="payment"]:checked');
            let payment = 'A combinar';
            if (paymentInput) {
                // O texto est√° dentro de um span dentro da div irm√£ do input
                const paymentLabelDiv = paymentInput.nextElementSibling;
                payment = paymentLabelDiv.querySelector('span').innerText;
            }

            // Formatar data para o padr√£o brasileiro
            const dataParts = date.split('-');
            const dataFormatada = `${dataParts[2]}/${dataParts[1]}/${dataParts[0]}`;

            // Criar a mensagem
            const msg = `Ol√°! Gostaria de agendar um hor√°rio no PetHappy:%0A` +
                        `üê∂ *Servi√ßo:* ${serviceName} (R$ ${servicePrice})%0A` +
                        `üë§ *Profissional:* ${staff}%0A` +
                        `üìÖ *Data:* ${dataFormatada} √†s ${time}%0A` +
                        `üí≥ *Pagamento:* ${payment}%0A%0A` +
                        `Aguardo confirma√ß√£o!`;

            // N√∫mero do WhatsApp da Loja (Substitua pelo seu n√∫mero real)
            const phone = "5511999999999"; 
            
            // Criar Link e Abrir
            const url = `https://wa.me/${phone}?text=${msg}`;
            window.open(url, '_blank');

            showToast('Redirecionando para o WhatsApp...');
            
            e.target.reset();
            document.getElementById('booking-summary').classList.add('hidden');
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // --- ADMIN PANEL LOGIC ---

        function openAdminModal() {
            document.getElementById('admin-modal').classList.remove('hidden');
            // Check if already logged in (simulated session)
            if(sessionStorage.getItem('adminLogged') === 'true') {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-dashboard').classList.remove('hidden');
                renderAdminLists();
            } else {
                document.getElementById('admin-login').classList.remove('hidden');
                document.getElementById('admin-dashboard').classList.add('hidden');
            }
        }

        function closeAdminModal() {
            document.getElementById('admin-modal').classList.add('hidden');
        }

        function checkLogin() {
            const user = document.getElementById('admin-user').value;
            const pass = document.getElementById('admin-pass').value;
            
            if (user === 'admin' && pass === '1234') {
                sessionStorage.setItem('adminLogged', 'true');
                document.getElementById('login-error').classList.add('hidden');
                openAdminModal(); // Will route to dashboard
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        }

        function logout() {
            sessionStorage.removeItem('adminLogged');
            openAdminModal(); // Will route to login
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Remove active style from buttons
            document.querySelectorAll('#admin-dashboard button.border-b-2').forEach(el => {
                el.classList.remove('border-b-2', 'border-brand', 'font-bold', 'text-brand');
                el.classList.add('text-gray-500');
            });
            
            // Show selected
            document.getElementById('tab-' + tabName).classList.remove('hidden');
            // Style button (simple heuristic based on onclick content)
            const btns = document.querySelectorAll('#admin-dashboard button');
            btns.forEach(btn => {
                if(btn.getAttribute('onclick')?.includes(tabName)) {
                    btn.classList.add('border-b-2', 'border-brand', 'font-bold', 'text-brand');
                    btn.classList.remove('text-gray-500');
                }
            });
        }

        function renderAdminLists() {
            // Render Services Edit List
            document.getElementById('admin-services-list').innerHTML = appData.services.map((s, index) => `
                <div class="flex items-center gap-2 bg-gray-50 p-2 rounded">
                    <input type="text" value="${s.name}" onchange="updateServiceData(${index}, 'name', this.value)" class="border p-1 rounded flex-1">
                    <input type="number" value="${s.price}" onchange="updateServiceData(${index}, 'price', this.value)" class="border p-1 rounded w-20">
                    <button onclick="removeService(${index})" class="text-red-500 hover:bg-red-100 p-1 rounded"><i class="fa-solid fa-trash"></i></button>
                </div>
            `).join('');

            // Render Staff Edit List
            document.getElementById('admin-staff-list').innerHTML = appData.staff.map((s, index) => `
                <div class="flex items-center gap-2 bg-gray-50 p-2 rounded">
                    <input type="text" value="${s.name}" onchange="updateStaffData(${index}, 'name', this.value)" class="border p-1 rounded flex-1">
                    <input type="text" value="${s.role}" onchange="updateStaffData(${index}, 'role', this.value)" class="border p-1 rounded flex-1">
                    <button onclick="removeStaff(${index})" class="text-red-500 hover:bg-red-100 p-1 rounded"><i class="fa-solid fa-trash"></i></button>
                </div>
            `).join('');

            // Render Payment Toggles
            document.getElementById('admin-payment-list').innerHTML = appData.payments.map((p, index) => `
                <div class="flex items-center justify-between bg-gray-50 p-3 rounded border ${p.active ? 'border-green-300 bg-green-50' : ''}">
                    <div class="flex items-center gap-2">
                        <i class="fa-solid ${p.icon}"></i>
                        <span>${p.name}</span>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" ${p.active ? 'checked' : ''} onchange="togglePayment(${index})" class="sr-only peer">
                        <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-brand"></div>
                    </label>
                </div>
            `).join('');
        }

        // --- ADMIN ACTIONS ---
        function updateServiceData(index, field, value) { appData.services[index][field] = value; }
        function removeService(index) { appData.services.splice(index, 1); renderAdminLists(); }
        
        function addService() {
            const name = document.getElementById('new-service-name').value;
            const price = document.getElementById('new-service-price').value;
            const icon = document.getElementById('new-service-icon').value || 'fa-paw';
            if(name && price) {
                appData.services.push({ id: Date.now(), name, price, icon, desc: 'Novo servi√ßo' });
                renderAdminLists();
                // clear inputs
                document.getElementById('new-service-name').value = '';
                document.getElementById('new-service-price').value = '';
            }
        }

        function updateStaffData(index, field, value) { appData.staff[index][field] = value; }
        function removeStaff(index) { appData.staff.splice(index, 1); renderAdminLists(); }
        
        function addStaff() {
            const name = document.getElementById('new-staff-name').value;
            const role = document.getElementById('new-staff-role').value;
            if(name && role) {
                appData.staff.push({ id: Date.now(), name, role });
                renderAdminLists();
                document.getElementById('new-staff-name').value = '';
                document.getElementById('new-staff-role').value = '';
            }
        }

        function togglePayment(index) {
            appData.payments[index].active = !appData.payments[index].active;
            renderAdminLists();
        }

        function saveChanges() {
            localStorage.setItem('petShopData', JSON.stringify(appData));
            renderApp(); // Re-render main site
            showToast('Altera√ß√µes salvas com sucesso!');
            closeAdminModal();
        }

        // Initialize
        renderApp();

    </script>
</body>
</html>